<template>
  <lightning-card title={cardTitle}>
    <div class="slds-p-around_medium">
      <div class="slds-box slds-box_x-small slds-theme_info slds-m-bottom_small" style="padding: 0.5rem;">
        <div class="slds-media">
          <div class="slds-media__figure">
            <lightning-icon icon-name="utility:info" size="xx-small" alternative-text="Info"></lightning-icon>
          </div>
          <div class="slds-media__body">
            <p class="slds-text-body_small slds-m-bottom_none">
              <strong>Vendor Program:</strong> A specific offering or service relationship with a vendor. 
              <strong>Best Practice:</strong> Include vendor name and program type (e.g., "PerfectVision Healthcare Provider Program").
            </p>
          </div>
        </div>
      </div>

      <lightning-input
        label="Search Vendor Program"
        value={searchText}
        onchange={handleSearchChange}
        onkeydown={handleSearchKeydown}
        placeholder="Enter program name, then press Enter or click Search"
      ></lightning-input>

      <lightning-button 
        label="Search" 
        onclick={searchVendorPrograms} 
        class="slds-m-top_small">
      </lightning-button>

    <template if:true={programs.length}>
      <p class="slds-m-top_medium">Select an existing program:</p>
      <lightning-radio-group
        options={programOptions}
        value={selectedProgramId}
        type="radio"
        onchange={handleProgramSelect}
      ></lightning-radio-group>
    </template>

    <div class="slds-m-top_medium">
      <lightning-button 
        variant="neutral" 
        label={createButtonLabel} 
        onclick={toggleCreateForm}
        class="slds-m-bottom_small">
      </lightning-button>
    </div>

    <template if:true={showCreateForm}>
      <div class="slds-box slds-theme_shade slds-m-bottom_small" style="padding: 0.75rem;">
        <p class="slds-text-heading_small slds-m-bottom_small">Create New Draft Vendor Program</p>
        <p class="slds-text-body_small slds-text-color_weak slds-m-bottom_small">
          All fields are required. The program will be created in Draft status.
        </p>

        <lightning-input 
          label="Program Name" 
          value={newProgramName} 
          onchange={handleNewProgramChange}
          placeholder="e.g., Verizon Fios D2D"
          required>
        </lightning-input>

        <lightning-input 
          label="Program Label" 
          value={newProgramLabel} 
          onchange={handleNewProgramLabelChange}
          placeholder="e.g., Verizon Fios D2D Program"
          required
          class="slds-m-top_small">
        </lightning-input>

        <lightning-combobox
          label="Retail Option"
          value={newProgramRetailOption}
          options={retailOptionOptions}
          onchange={handleRetailOptionChange}
          placeholder="Select Retail Option"
          required
          class="slds-m-top_small">
        </lightning-combobox>

        <lightning-combobox
          label="Business Vertical"
          value={newProgramBusinessVertical}
          options={businessVerticalOptions}
          onchange={handleBusinessVerticalChange}
          placeholder="Select Business Vertical"
          required
          class="slds-m-top_small">
        </lightning-combobox>

        <lightning-button 
          label="Create Draft Program" 
          onclick={createProgram} 
          variant="brand"
          disabled={nextDisabled}
          class="slds-m-top_small">
        </lightning-button>
      </div>
    </template>

      <!-- Navigation buttons removed - handled by flow engine footer -->
    </div>
  </lightning-card>
</template>
